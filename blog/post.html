<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <title>Blogginnlegg – Attolloo Group</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../style.css?v=8">
</head>
<body data-page="blog-post">

<header class="site-header">
  <div class="container">
    <a class="site-logo" href="../index.html"><img src="../aab-logo.png" alt="Attolloo logo"></a>
    <span class="site-brand-text">Attolloo Group</span>
    <nav class="main-nav">
      <ul>
        <li><a href="../index.html">Forside</a></li>
        <li><a href="../about.html">Om oss</a></li>
        <li><a href="../services.html">Tjenester</a></li>
        <li><a href="index.html">Blogg</a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="page-top-space"></div>

<main class="container">
  <article class="post">
    <h1 id="post-title">Laster …</h1>
    <p id="post-date"></p>
    <img id="post-cover" class="small-cover" src="" alt="" style="display:none">
    <div id="post-content"></div>
  </article>
  <p><a href="index.html">← Tilbake til bloggen</a></p>
</main>

<footer class="container">
  <p>&copy; <span id="year"></span> Attolloogroup.</p>
</footer>

<script>
document.getElementById("year").textContent = new Date().getFullYear();

const slug = new URLSearchParams(location.search).get("p");

(async function(){
  try {
    const res = await fetch("posts.json?v=" + Date.now());
    const posts = await res.json();
    const post = posts.find(p => p.slug === slug);
    if(!post){
      document.getElementById("post-title").textContent = "Innlegg ikke funnet";
      return;
    }

    document.getElementById("post-title").textContent = post.title;
    document.getElementById("post-date").textContent = post.date || "";
    if(post.cover){
      const img = document.getElementById("post-cover");
      img.src = post.cover;
      img.style.display = "block";
    }
    document.getElementById("post-content").innerHTML = post.body || "<p>(Ingen innhold)</p>";
  } catch(e){
    console.error(e);
    document.getElementById("post-title").textContent = "Feil: kunne ikke laste blogginnlegg.";
  }
})();
</script>
</body>
</html>
